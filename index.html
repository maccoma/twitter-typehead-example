
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Lookahead Test</title>
	<meta name="generator" content="BBEdit 9.6" />
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	<script src='http://twitter.github.com/typeahead.js/releases/latest/typeahead.js'></script>
	<link rel='stylesheet' href='http://twitter.github.com/typeahead.js/releases/latest/typeahead.css' />
</head>
<body>
<h1>This is a test of Twitter's typeahead.js</h1>
<div>
<form id="myForm" action="destination.html">
<input id="departure" type="text" placeholder="This appears when you load page" size="100">
<input style="display:none;" id="hiddeninputid" name="hiddeninputname" value="default" />
<input type="submit" value="Go" />
</form>
</div>
<script>
$(document).ready(function() {

	$('#departure').typeahead({                                
	  name: 'departureuuu',                                                          
	  prefetch: 'data/test.json',                                         
	  limit: 10                                                                   
	});
});
</script>
<script>
		$('#myForm').submit(function() 
		{
		  // alert('Handler for .submit() called.');
		  // We're in business I think 
		  var n = $('#departure').val().indexOf(",");
		  if (n > 0)
		  {
		  	var theCity = $('#departure').val().substring(0,n);
		  	$('input[id=hiddeninputid]').val(theCity);
		  }
		  else
		  {
		  	$('input[id=hiddeninputid]').val($('#departure').val());
		  }
		  alert($('input[id=hiddeninputid]').val());
		  return false;
		});
</script>
</body>
</html>
